/**
 * 通用的表格生成函数
 * @param data
 * @param columnDefs  -- 提供每行td对应的class定义,特殊的为(行尾)的operation,一般的使用"_XXX"的规范（非强制）
 * @param tableId	  -- table的id
 * @param dataHandler	-- 数据的处理函数
 * @return
 */function generateOperationTableTr(a,b,c,d){b=$("#"+b);b.find('tr:not(".tableTitle")').remove();0==a.length&&alert("\u6ca1\u6709\u67e5\u5230\u8bb0\u5f55!");for(var e=0;e<a.length;e++){for(var h=a[e],k=$("\x3ctr\x3e").attr("id",h.id),f=0;f<d.length;f++){var l=d[f],g=$("\x3ctd\x3e").addClass(l),g=c(h,l,g);g.appendTo(k)}k.appendTo(b)}}
function setPageTool(a,b){$pageTool=$("#"+b).closest(".searchResult").find(".pageTool");$pageTool.find(".inPage").text(a.inPage).end().find(".pageCount").text(a.pageCount).end().find(".recordCount").text(a.recordCount);var c=a.pageSize;$pageTool.closest(".searchResult").find("table").find("tr:not(.tableTitle)").find("td.index").each(function(b,e){$(this).text((a.inPage-1)*c+b+1)})}
var userTableId="user_searchTable",userColClsDefs="index _work_id _rname _group _edit_time operation".split(" "),userDataHandler=function(a,b,c){if("_"==b.substr(0,1))"group"==b.substr(1)?c.text(a.group.name):"edit_time"==b.substr(1)?c.text(computeDate(a.edit_time)):c.text(a[b.substr(1)]);else if("operation"==b)if("N"==a.del_flag){b=["editBtn","deleteBtn"];for(var d=0;d<b.length;d++)a=$('\x3cdiv class\x3d"oprBtn"\x3e').addClass(b[d]),"editBtn"==b[d]?a.text("\u7f16\u8f91"):"deleteBtn"==b[d]&&a.text("\u5220\u9664"),
c.append(a)}else"Y"==a.del_flag&&(a=$('\x3cdiv class\x3d"oprBtn"\x3e').addClass("activeBtn"),a.text("\u542f\u7528"),b=$('\x3cdiv class\x3d"oprBtn"\x3e').addClass("destroyBtn"),b.text("\u9500\u6bc1"),c.append(a).append(b));return c};function generateUserTr(a){void 0==a&&alert("debug:user datas is undeinfed");generateOperationTableTr(a,userTableId,userDataHandler,userColClsDefs)}function generateUserPage(a){generateUserTr(a.dataList);setPageTool(a,userTableId)}
var newsTableId="news_searchTable",newsColClsDefs=["index","_title","_publish_date","_editor","operation"],newsDataHandler=function(a,b,c){if("_"==b.substr(0,1))"_publish_date"==b?c.text(computeDate(a[b.substr(1)])):c.text(a[b.substr(1)]);else if("operation"==b){var d;"N"==a.del_flag?d=["editBtn","deleteBtn"]:"Y"==a.del_flag&&(d=["activeBtn"]);for(a=0;a<d.length;a++)b=$('\x3cdiv class\x3d"oprBtn"\x3e').addClass(d[a]),"editBtn"==d[a]?b.text("\u7f16\u8f91"):"deleteBtn"==d[a]?b.text("\u5220\u9664"):
"activeBtn"==d[a]&&b.text("\u6062\u590d"),c.append(b)}return c};function generateNewsTr(a){generateOperationTableTr(a,newsTableId,newsDataHandler,newsColClsDefs)}function generateNewsPage(a){generateNewsTr(a.dataList);setPageTool(a,newsTableId)}
var tableTableId="table_searchTable",tableColClsDefs=["_edit_time","_name","_type","_editor","operation"],tableDataHandler=function(a,b,c){if("_"==b.substr(0,1))"_edit_time"==b?(a=computeDate(a.edit_time),c.text(a)):"_type"==b?a.type?(c.append($("\x3cspan\x3e").text(a.type)),c.append($('\x3ca href\x3d"#" class\x3d"changeBindType" style\x3d"float:right;"\x3e').text("\u5207\u6362"))):($a=$('\x3ca href\x3d"#" class\x3d"bindTableType"\x3e').text("\u672a\u7ed1\u5b9a"),c.append($a)):c.text(a[b.substr(1)]);
else if("operation"==b&&"N"==a.del_flag)for(a=["deleteBtn"],b=0;b<a.length;b++){var d=$('\x3cdiv class\x3d"oprBtn"\x3e').addClass(a[b]);"deleteBtn"==a[b]&&d.text("\u5220\u9664");c.append(d)}return c};function generateTableTr(a){void 0==a&&alert("debug:Table datas is undeinfed");generateOperationTableTr(a,tableTableId,tableDataHandler,tableColClsDefs)}function generateTablePage(a){generateTableTr(a.dataList);setPageTool(a,tableTableId)}
var area_a_log_title={titleDefs:[{cls:"index",name:"\u5e8f\u53f7"},{cls:"_apply_date",name:"\u7533\u8bf7\u65e5\u671f",editable:!0},{cls:"_apply_department",name:"\u7533\u8bf7\u90e8\u95e8",editable:!0},{cls:"_invoice_no",name:"INVOICE_NO",editable:!0},{cls:"_pre_apply_no",name:"\u9884\u7533\u8bf7\u5355\u53f7",editable:!0},{cls:"_supplier",name:"\u4f9b\u8d27\u65b9",editable:!0},{cls:"_goods_name",name:"\u7269\u54c1\u540d\u79f0",editable:!0},{cls:"_pallet_count",name:"\u5c55\u677f\u6570",editable:!0},
{cls:"_package_count",name:"\u5305\u6570",editable:!0},{cls:"_count",name:"\u6570\u91cf",editable:!0},{cls:"_plate_num",name:"\u8f66\u724c\u53f7",editable:!0},{cls:"_customs_broker_out",name:"\u62a5\u5173\u884c(\u62a5\u51fa)",editable:!0},{cls:"_customs_broker_in",name:"\u62a5\u5173\u884c(\u62a5\u8fdb)",editable:!0},{cls:"_applicant",name:"\u7533\u8bf7\u4eba",editable:!0},{cls:"_purchasing_agent",name:"\u91c7\u8d2d",editable:!0},{cls:"_truker_phone",name:"\u53f8\u673a\u7535\u8bdd",editable:!0},{cls:"_comment",
name:"\u8bc4\u8bba",editable:!0},{cls:"_opt_version",name:"\u7248\u672c",editable:!0},{cls:"_last_editor",name:"\u7f16\u8f91\u8005",editable:!0},{cls:"_edit_time",name:"\u7f16\u8f91\u65f6\u95f4",editable:!0}]},area_c_log_title={titleDefs:[{cls:"index",name:"\u5e8f\u53f7"},{cls:"_apply_date",name:"\u7533\u8bf7\u65e5\u671f",editable:!0},{cls:"_apply_department",name:"\u7533\u8bf7\u90e8\u95e8",editable:!0},{cls:"_invoice_no",name:"INVOICE_NO",editable:!0},{cls:"_pre_apply_no",name:"\u9884\u5ba1\u8bf7\u5355\u53f7",
editable:!0},{cls:"_goods_name",name:"\u7269\u54c1\u540d\u79f0",editable:!0},{cls:"_package_count",name:"\u5305\u6570",editable:!0},{cls:"_count",name:"\u6570\u91cf",editable:!0},{cls:"_plate_num",name:"\u8f66\u724c\u53f7",editable:!0},{cls:"_truker_phone",name:"\u53f8\u673a\u7535\u8bdd",editable:!0},{cls:"_customs_broker_out",name:"\u62a5\u5173\u884c(\u51fa)",editable:!0},{cls:"_customs_broker_in",name:"\u62a5\u5173\u884c(\u8fdb)",editable:!0},{cls:"_applicant",name:"\u7533\u8bf7\u4eba",editable:!0},
{cls:"_purchasing_agent",name:"\u7533\u8bf7\u4eba",editable:!0},{cls:"_comment",name:"\u7533\u8bf7\u4eba",editable:!0},{cls:"_opt_version",name:"\u7248\u672c",editable:!0},{cls:"_last_editor",name:"\u7f16\u8f91\u4eba",editable:!0},{cls:"_edit_time",name:"\u7f16\u8f91\u65f6\u95f4",editable:!0}]};
function generateLogTitle_A(){var a=$("#log_searchTable");$(".tableTitle",a).remove();$("col",a).remove();for(var b=area_a_log_title,c=$('\x3ctr class\x3d"tableTitle"\x3e'),d=0;d<b.titleDefs.length;d++){var e=b.titleDefs[d];$("\x3ccol\x3e").addClass(e.cls).appendTo(a);e=$("\x3cth\x3e").addClass(e.cls).text(e.name);c.append(e)}c.prependTo(a)}
function generateLogTitle_C(){var a=$("#log_searchTable");$(".tableTitle",a).remove();$("col",a).remove();for(var b=area_c_log_title,c=$('\x3ctr class\x3d"tableTitle"\x3e'),d=0;d<b.titleDefs.length;d++){var e=b.titleDefs[d];$("\x3ccol\x3e").addClass(e.cls).appendTo(a);e=$("\x3cth\x3e").addClass(e.cls).text(e.name);c.append(e)}c.prependTo(a)}
var logColClsDef_C="index _apply_date _apply_department _invoice_no _pre_apply_no _goods_name _package_count _count _plate_num _truker_phone _customs_broker_out _customs_broker_in _applicant _purchasing_agent _comment _opt_version _last_editor _edit_time".split(" "),logColClsDef_A="index _apply_date _apply_department _invoice_no _pre_apply_no _supplier _goods_name _pallet_count _package_count _count _plate_num _customs_broker_out _customs_broker_in _applicant _purchasing_agent _truker_phone _comment _opt_version _last_editor _edit_time".split(" "),
logTableId="log_searchTable",logDataHandler=function(a,b,c){"_"==b.substr(0,1)&&("edit_time"==b.substr(1)?c.text(computeTimestamp(a.edit_time)):c.text(a[b.substr(1)]));return c};function generateLogTr_A(a){generateOperationTableTr(a,logTableId,logDataHandler,logColClsDef_A)}function generateLogTr_C(a){generateOperationTableTr(a,logTableId,logDataHandler,logColClsDef_C)}function generateLogPage_A(a){var b=a.dataList;generateLogTitle_A(b);generateLogTr_A(b);setPageTool(a,logTableId)}
function generateLogPage_C(a){var b=a.dataList;generateLogTitle_C(b);generateLogTr_C(b);setPageTool(a,logTableId)}
var metainfoTableId="metainfo_searchTable",metainfoColClsDefs=["index","_name","_editor","_edit_time","operation"],metainfoDataHandler=function(a,b,c){if("_"==b.substr(0,1))"edit_time"==b.substr(1)?c.text(computeDate(a.edit_time)):c.text(a[b.substr(1)]);else if("operation"==b){a=a.del_flag;var d;"N"==a?d=["deleteBtn"]:"Y"==a&&(d=["activeBtn"]);for(a=0;a<d.length;a++)b=$('\x3cdiv class\x3d"oprBtn"\x3e').addClass(d[a]),"deleteBtn"==d[a]?b.text("\u5220\u9664"):"activeBtn"==d[a]&&b.text("\u6fc0\u6d3b"),
c.append(b)}return c};function generateMetainfoTr(a){void 0==a&&alert("debug:metainfo datas is undeinfed");generateOperationTableTr(a,metainfoTableId,metainfoDataHandler,metainfoColClsDefs)}function generateMetainfoPage(a){generateMetainfoTr(a.dataList);setPageTool(a,metainfoTableId)}
var tableTypeTableId="tableType_searchTable",tableTypeColClsDefs=["index","_name","_editor","_edit_time","operation"],tableTypeDataHandler=function(a,b,c){"_"==b.substr(0,1)?"edit_time"==b.substr(1)?c.text(computeDate(a.edit_time)):c.text(a[b.substr(1)]):"operation"==b&&(b=$('\x3cdiv class\x3d"oprBtn"\x3e'),"Y"==a.del_flag?b.addClass("activeBtn").text("\u6fc0\u6d3b"):"N"==a.del_flag&&b.addClass("deleteBtn").text("\u5220\u9664"),c.append(b));return c};
function generateTableTypeTr(a){void 0==a&&alert("debug:tableType datas is undeinfed");generateOperationTableTr(a,tableTypeTableId,tableTypeDataHandler,tableTypeColClsDefs)}function generateTableTypePage(a){generateTableTypeTr(a.dataList);setPageTool(a,tableTypeTableId)}
var oprLogTableId="oprLog_searchTable",oprLogColClsDefs="index _operation_type _work_id _edit_time _from_ip _comment".split(" "),oprLogDataHandler=function(a,b,c){"_"==b.substr(0,1)&&("edit_time"==b.substr(1)?c.text(computeTimestamp(a.edit_time)):c.text(a[b.substr(1)]));return c};function generateOprLogTr(a){void 0==a&&alert("debug:oprLog datas is undeinfed");generateOperationTableTr(a,oprLogTableId,oprLogDataHandler,oprLogColClsDefs)}
function generateOprLogPage(a){generateOprLogTr(a.dataList);setPageTool(a,oprLogTableId)}
var mailTableId="mail_searchTable",mailColClsDefs="index _pre_apply_no _sender_work_id _sender_name _send_date _mail_to _type _checked operation".split(" "),mailDataHandler=function(a,b,c){if("_"==b.substr(0,1)){var d=b.substr(1);"send_date"==d?c.text(computeTimestamp(a.send_date)):(c.text(a[b.substr(1)]),"checked"==d&&("Y"==a.checked?c.css("background","#00FF66"):"N"==a.checked&&c.css("background","#FFFF99")))}else"operation"==b&&(b=$('\x3cdiv class\x3d"oprBtn"\x3e'),"Y"==a.checked?b.addClass("deleteBtn").text("\u5220\u9664\u8bb0\u5f55"):
"N"==a.checked&&b.addClass("deleteBtn").text("\u64a4\u9500\u8bf7\u6c42"),c.append(b));return c};function generateMailTr(a){void 0==a&&alert("debug:email datas is undeinfed");generateOperationTableTr(a,mailTableId,mailDataHandler,mailColClsDefs)}function generateMailPage(a){generateMailTr(a.dataList);setPageTool(a,mailTableId)}
var mailBoxTableId="mailBox_searchTable",mailBoxColClsDefs="index _pre_apply_no _sender_work_id _sender_name _send_date _mail_to _type _checked operation".split(" "),mailBoxDataHandler=function(a,b,c){if("_"==b.substr(0,1)){var d=b.substr(1);"send_date"==d?c.text(computeTimestamp(a.send_date)):(c.text(a[b.substr(1)]),"checked"==d&&("Y"==a.checked?c.css("background","#00FF66"):"N"==a.checked&&c.css("background","#FFFF99")))}else"operation"==b?(b=$('\x3cdiv class\x3d"oprBtn"\x3e'),"Y"==a.checked?b.addClass("rogerBtn").text("\u5220\u9664"):
"N"==a.checked&&b.addClass("infoBtn").text("\u8be6\u60c5"),c.append(b)):"index"==b&&c.data("sn_code",a.sn_code);return c};function generateMailBoxTr(a){void 0==a&&alert("debug:mailBox datas is undeinfed");generateOperationTableTr(a,mailBoxTableId,mailBoxDataHandler,mailBoxColClsDefs)}function generateMailBoxPage(a){generateMailBoxTr(a.dataList);setPageTool(a,mailBoxTableId)};